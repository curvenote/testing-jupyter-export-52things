
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Speeding things up &#8212; 52 Things You Should Know About Geocomputing</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Serverless computing" href="selvage-serverless-computing.html" />
    <link rel="prev" title="I hate computers II" href="rusic-i-hate-computers-2.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">52 Things You Should Know About Geocomputing</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="introduction.html">
   Introduction
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="indices.html">
   Indices
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="alphabetical.html">
     Alphabetical
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="by-author.html">
     By Author
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="by-topic.html">
     By Topic
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="chapters.html">
   Chapters
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="bentley-in-praise-of-small-tools.html">
     In Praise of Small Tools, or a short Ode to the CommandLine
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="bentley-best-practices-not-always-best-approach.html">
     Best Practices are not (always) the best approach
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="bingham-domain-driven-design.html">
     Domain-Driven Design in Geocomputing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="5-minute-intro-to-hpc.html">
     5 Minute Intro to HPC
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="caumon-levy-is-geology-cartesian.html">
     Is Geology Cartesian?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="cawood-bond-why-use-virtual-outcrops.html">
     Why use virtual outcrops?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="cockett-building-technical-comunication-tools.html">
     Building Technical Communication Tools
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ooi-simple-machine-learning-tutorial.html">
     Simple Machine Learning: A Mini Tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="dinneen-segy.html">
     SEG-Y: Judging books by their covers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="dramsch-general-purpose-gpu-programming.html">
     General purpose GPU programming
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="dunnington-r-rstudio-tidyverse-for-geocomputing.html">
     R, RStudio, and the tidyverse for Geocomputing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="dunnington-grammar-of-graphics.html">
     The grammar of graphics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="bril-turn-data-into-colors.html">
     Turn data into colours
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ennen-software-everywhere.html">
     Software, software, everywhere, but which ones should I choose?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="fomel-reproducable-research.html">
     Reproducible Research
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="gram-seismic-data-encryption.html">
     Seismic Data Encryption
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="gosses-standing-on-shoulders.html">
     Standing on the Shoulders of the Guy in the UK Office
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="hale-my-favorite-10-line-program.html">
     My favourite 10-line program
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="hall-whats-so-special-about-geoscience.html">
     What’s so special about geoscience?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="hall-what-is-scientific-computing.html">
     What is scientific computing?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="howell-burnham-virtual-geoscience-revolution-1.html">
     The Virtual Geoscience Revolution: From William Smith to Lidar
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="howell-burnham-virtual-geoscience-revolution-2.html">
     The Virtual Geoscience Revolution: Beyond Lidar – the democratization of Virtual Outcrops
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="kondrat-getting-started-in-geocomputing.html">
     Getting started in Geocomputing can seem daunting but it doesn’t need to be!
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="larsen-crossplots-boardroom-table.html">
     Crossplots on the boardroom table
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="leckenby-my-name-is-bot-geobot.html">
     My name is bot, geobot
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="leeman-hardware-is-hard-teach-geotech.html">
     Hardware is hard: teaching geotech
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="mcnaughton-digitalization.html">
     ‘Digitalization,’ from Harry Nyquist to the ‘edge’ of the internet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="menger-steady-advance-of-linux.html">
     The Steady Advance of Linux
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="menger-software-challenges-in-oil-and-gas.html">
     Software Challenges in Oil and Gas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="newton-human-neural-networks-in-geocomputing.html">
     Human neural networks in geocomputing
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="niccoli-prototype-colormaps-for-faults.html">
     Prototype colourmaps for fault interpretation
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="simple">
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="niccoli-keep-on-improving-geocomputing-projects.html">
     Keep on improving your geocomputing projects
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="simple">
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="niccoli-advice-on-reproducing-figures.html">
     Some advice on reproducing figures
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="simple">
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="niederau-tailor-your-teaching-with-jupyter.html">
     Tailor your teaching with Jupyter Notebooks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pethick-the-obsolete-geoscientist.html">
     The obsolete geoscientist
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pisel-arm-wavers-anonymous.html">
     Arm-wavers Anonymous
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="purves-learn-javascript.html">
     Learn Javascript
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pyrcz-open-source-geostatistical-modelling.html">
     Open source geostatistical geomodelling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pyrcz-machine-learning-for-geological-modelling.html">
     Machine Learning for Geological Modeling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="richardson-use-standard-not-specialized-formats.html">
     Use standard, not specialized, file and problem formats
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="rogers-advice-fracture-modelling-to-younger-self.html">
     Some advice from a fractured reservoir modeler to his younger self
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="rusic-i-hate-computers.html">
     I hate computers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="rusic-i-hate-computers-2.html">
     I hate computers II
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Speeding things up
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="selvage-serverless-computing.html">
     Serverless computing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="steen-how-to-teach-geoscience-students-to-code.html">
     How to teach geoscience students to code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="thurmond-overcome-the-tyranny-of-formats.html">
     Overcoming the tyranny of formats
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="wellmann-a-geological-model-is-one-of-many.html">
     A Geological Model is a Single Hypothesis - of Many Possible Ones
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="delavarga-gempy-3d-structural-geomodelling.html">
     GemPy: 3D Structural Geomodeling in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sabirin-quality-checking-spatial-data.html">
     Quality Checking your Spatial Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sasvari-the-pheonix.html">
     The Pheonix
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="storey-de-profundis-of-well-depth.html">
     De profundis: of well depth
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="bios.html">
   Author Bios
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="contributing.html">
   Contributing
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="review-status.html">
     Review Status
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="submitting-an-article.html">
     Submitting an article
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="headshots-needed.html">
     Headshots &amp; Bios needed
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="for-reviewers.html">
     For Reviewers
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="not-ready-for-review.html">
   Not Ready For Review
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="bougher-a-linear-algebra-approach-seismic-model.html">
     Am=d: A linear algebra approach to seismic modelling
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Written in <a href="https://curvenote.com">Curvenote</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/saltman-speeding-things-up.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#measuring-performance">
   Measuring performance
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#timers">
     Timers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#profilers">
     Profilers
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tips-for-writing-faster-code">
   Tips for writing faster code
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#use-vectorized-operations">
     1. Use vectorized operations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#don-t-forget-about-i-o">
     2. Don’t forget about I/O
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#be-lazy">
     3. Be Lazy
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#think-like-a-computer-scientist">
     4. Think like a computer scientist
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Speeding things up</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#measuring-performance">
   Measuring performance
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#timers">
     Timers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#profilers">
     Profilers
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tips-for-writing-faster-code">
   Tips for writing faster code
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#use-vectorized-operations">
     1. Use vectorized operations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#don-t-forget-about-i-o">
     2. Don’t forget about I/O
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#be-lazy">
     3. Be Lazy
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#think-like-a-computer-scientist">
     4. Think like a computer scientist
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="speeding-things-up">
<h1>Speeding things up<a class="headerlink" href="#speeding-things-up" title="Permalink to this headline">¶</a></h1>
<p>Slow code is nothing to be ashamed of. If the program runs and produces correct results, the important work is done. But when the time does come to speed things up, it can be difficult to know where to start. Don’t panic and write a blog post about how slow Python/R/Julia is, instead try to utilize some of these tools and strategies.</p>
<div class="section" id="measuring-performance">
<h2>Measuring performance<a class="headerlink" href="#measuring-performance" title="Permalink to this headline">¶</a></h2>
<p>To speed up slow code, the first step is to determine what is slowing things down. For simple programs it may be easy to intuitively identify bottlenecks. Trusting your gut ceases to be an appropriate strategy as codebases grow in size and complexity.</p>
<p>Measurement tools such as <em>profilers</em> and <em>timers</em> are invaluable allies when optimizing programs. Explicitly measuring the speed of code execution can shine light on subtle bottlenecks and inefficiencies which may not have been discovered otherwise.</p>
<div class="section" id="timers">
<h3>Timers<a class="headerlink" href="#timers" title="Permalink to this headline">¶</a></h3>
<p>Timers measure the time it takes to execute an expression. Using a timer helps to isolate and test the speed of a small snippet or function. The code block below demonstrates using the IPython <code class="docutils literal notranslate"><span class="pre">%timeit</span></code> magic command to compare two different ways to build a list of squares in Python:</p>
<div class="highlight-null notranslate"><div class="highlight"><pre><span></span>In \[1\]: def comprehension(n):
   ...:     return \[i\*\*2 for i in range(n)\]
   ...:

In \[2\]: def loop(n):
   ...:     x = \[\]
   ...:     for i in range(n):
   ...:         x.append(i\*\*2)
   ...:     return x
   ...:

In \[3\]: %timeit comprehension(1000)
190 µs ± 1.35 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)

In \[4\]: %timeit loop(1000)
226 µs ± 2.44 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</pre></div>
</div>
</div>
<div class="section" id="profilers">
<h3>Profilers<a class="headerlink" href="#profilers" title="Permalink to this headline">¶</a></h3>
<p>Profilers measure how often different parts of a program are called and how long they take to execute. For example, consider the following inefficient Python program:</p>
<div class="highlight-null notranslate"><div class="highlight"><pre><span></span>\# fib_buzz.py

def fib(n):
    if n &lt; 2:
        return n
    else:
        return fib(n - 1) + fib(n - 2)
</pre></div>
</div>
<p>def fib_buzz(n): for i in range(n): if fib(i) % 3 == 0 and fib(i) % 5 == 0: print(“fibbuzz”)</p>
<div class="highlight-null notranslate"><div class="highlight"><pre><span></span>    elif fib(i) % 3 == 0:
        print(&quot;fib&quot;)

    elif fib(i) % 5 == 0:
        print(&quot;buzz&quot;)

    else:
        print(i)
</pre></div>
</div>
<p>Profiling <code class="docutils literal notranslate"><span class="pre">fib_buzz</span></code> with the IPython <code class="docutils literal notranslate"><span class="pre">%prun</span></code> magic command produces the following table:</p>
<div class="highlight-null notranslate"><div class="highlight"><pre><span></span>In \[1\] %load fib_buzz.py

In \[2\] %prun -s calls -l 10 fib_buzz(30)

         13048500 function calls (722 primitive calls) in 2.959 seconds

    Ordered by: call count
    List reduced from 15 to 10 due to restriction &lt;10&gt;

     ncalls tottime percall cumtime percall filename:lineno(function)
  13047866/88 2.948 0.000 2.948 0.034 &lt;ipython-input-3-a0fe65949268&gt;:2(fib)
        120 0.000 0.000 0.000 0.000 {method &#39;finditer&#39; of &#39;re.Pattern&#39; objects}
         60 0.000 0.000 0.010 0.000 ansitowin32.py:40(write)
         60 0.000 0.000 0.010 0.000 ansitowin32.py:160(write)
         60 0.000 0.000 0.010 0.000 ansitowin32.py:177(write_and_convert)
         60 0.000 0.000 0.009 0.000 ansitowin32.py:193(write_plain_text)
         60 0.000 0.000 0.000 0.000 ansitowin32.py:245(convert_osc)
         60 0.004 0.000 0.004 0.000 {method &#39;write&#39; of &#39;_io.TextIOWrapper&#39; objects}
         60 0.006 0.000 0.006 0.000 {method &#39;flush&#39; of &#39;_io.TextIOWrapper&#39; objects}
         60 0.000 0.000 0.000 0.000 {built-in method builtins.len}
</pre></div>
</div>
<p>This output shows that <code class="docutils literal notranslate"><span class="pre">fib</span></code> function calls make up the majority of the program runtime. Optimization efforts should be focused on the <code class="docutils literal notranslate"><span class="pre">fib</span></code> function, either by reducing the number of times it is called or by speeding up execution time per call.</p>
</div>
</div>
<div class="section" id="tips-for-writing-faster-code">
<h2>Tips for writing faster code<a class="headerlink" href="#tips-for-writing-faster-code" title="Permalink to this headline">¶</a></h2>
<p>Writing fast code to solve problems in scientific computing is a lot like writing fast code in any other domain. However, there are some specific performance considerations to keep in mind, especially regarding n-dimensional arrays. Below are a few tips for writing faster scientific code:</p>
<div class="section" id="use-vectorized-operations">
<h3>1. Use vectorized operations<a class="headerlink" href="#use-vectorized-operations" title="Permalink to this headline">¶</a></h3>
<p>When working with data stored in arrays, vectorized functions are much faster than using a loop to apply an operation element by element. Vectorized functions operate on entire dimensions at once and take advantage of low-level optimizations to perform calculations fast.</p>
<p>For example, the snippet below shows that squaring a <code class="docutils literal notranslate"><span class="pre">numpy</span></code> array using a vectorized function is &gt;35 times faster than looping over the array with <code class="docutils literal notranslate"><span class="pre">apply_along_axis</span></code>.</p>
<div class="highlight-null notranslate"><div class="highlight"><pre><span></span>In \[1\]: import numpy as np

In \[2\]: a = np.arange(1000)

In \[3\]: %timeit np.apply_along_axis(lambda x: x\*\*2, 0, a)
62 µs ± 4.23 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)

In \[4\]: %timeit a \*\* 2
1\.75 µs ± 38.3 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
</pre></div>
</div>
</div>
<div class="section" id="don-t-forget-about-i-o">
<h3>2. Don’t forget about I/O<a class="headerlink" href="#don-t-forget-about-i-o" title="Permalink to this headline">¶</a></h3>
<p>Reading and writing data can be an easy bottleneck to overlook, I/O handling often amounts to a few lines of code at the beginning and end of a script. When working with a lot of data—whatever that means to you—carefully consider how data is being stored and accessed. Some tips:</p>
<ul class="simple">
<li><p>Only load necessary columns into memory and specify data types so the loader doesn’t have to infer them.</p></li>
<li><p>Loading data in chunks, processing the chunks, then aggregating is a powerful strategy for efficiently dealing with larger datasets.</p></li>
<li><p>Delimited text files aren’t always the right way to store data. Alternative options depending on how your data is structured could include <code class="docutils literal notranslate"><span class="pre">HDF</span></code>, <code class="docutils literal notranslate"><span class="pre">NetCDF</span></code>, <code class="docutils literal notranslate"><span class="pre">Parquet</span></code>, or a trusty relational database.</p></li>
</ul>
</div>
<div class="section" id="be-lazy">
<h3>3. Be Lazy<a class="headerlink" href="#be-lazy" title="Permalink to this headline">¶</a></h3>
<p>As thrilling as it may be to write something from scratch, utilizing the right library is a shortcut to writing fast code. Scientific programming libraries are written with speed in mind and take liberal advantage of low-level optimizations (the <code class="docutils literal notranslate"><span class="pre">numpy</span></code> package is about 50% C code).</p>
</div>
<div class="section" id="think-like-a-computer-scientist">
<h3>4. Think like a computer scientist<a class="headerlink" href="#think-like-a-computer-scientist" title="Permalink to this headline">¶</a></h3>
<p>Micro-optimizations that speed up single expressions are often trumped by picking a more efficient algorithm. Selecting the right data structures and algorithm for the problem at hand is an essential skill when writing efficient code.</p>
<p>Not everyone who writes code for scientific analysis needs a computer science degree and an A+ in an algorithms class. Just like with cars or bikes, a little bit of knowledge of the mechanics of what is going on beneath the hood goes a long way.</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="rusic-i-hate-computers-2.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">I hate computers II</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="selvage-serverless-computing.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Serverless computing</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Software Underground<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>